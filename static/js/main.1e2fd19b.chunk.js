(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[0],{23:function(e,t,s){e.exports={dialoguesPage:"Dialogues_dialoguesPage__1gZ1M",dialoguesList:"Dialogues_dialoguesList__xmogx",active:"Dialogues_active__jc3c8",messagesList:"Dialogues_messagesList__EVw8R"}},24:function(e,t,s){e.exports={avatar:"users_avatar__2NBm8",selectedPage:"users_selectedPage__2VY4r"}},28:function(e,t,s){e.exports={appWrapper:"App_appWrapper__1N3As",appWrapperContent:"App_appWrapperContent__1Rv3K"}},30:function(e,t,s){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__mkR90"}},31:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__2-bek",posts:"MyPosts_posts__zQK6_"}},32:function(e,t,s){e.exports={header:"Header_header__3vltG",loginBlock:"Header_loginBlock__j78vF"}},45:function(e,t,s){e.exports={dialogue:"DialogueItem_dialogue__28rWi"}},46:function(e,t,s){e.exports={message:"Message_message__3tJw3"}},48:function(e,t,s){e.exports={item:"Post_item__1zOmz"}},50:function(e,t,s){},7:function(e,t,s){e.exports={nav:"Navbar_nav__-FuZV",item:"Navbar_item__2-lI7",active:"Navbar_active__KiUqI"}},79:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),r=(s(50),s(25)),c=s(12),i=s(2),o=s(42),u=s.n(o).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"c8be0b36-3ac5-42a7-89ea-e79ef5d95007"}}),l=function(e,t){return u.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},j=function(e){return u.post("follow/".concat(e))},d=function(e){return u.delete("follow/".concat(e))},p=function(e){return u.get("profile/".concat(e))},g=function(){return u.get("auth/me")},b="ADD-POST",O="UPDATE-NEW-POST-TEXT",f="SET-USER-PROFILE",h={posts:[],newPostText:"",userProfile:{}},x="UPDATE-NEW-MESSAGE-TEXT",m="SEND-MESSAGE",v={dialogues:[{id:1,personName:"1111"},{id:2,personName:"2222"},{id:3,personName:"3333"},{id:4,personName:"4444"},{id:5,personName:"5555"}],messages:[{id:1,messageText:"Hi-Hi-Hi!!!!!!"},{id:2,messageText:"Go to sleep, pls)))))."},{id:3,messageText:"I Love You!!)))"},{id:4,messageText:"Why.....&"},{id:5,messageText:"$500/month is not enough... We can do better!!!!"}],newMessageText:""},P="FOLLOW",_="UNFOLLOW",T="SET-USERS",w={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},N=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},C=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",userId:e,followingInProgress:t}},E="SET-USER-DATA",S={id:null,email:null,login:null,isAuth:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(i.a)(Object(i.a)(Object(i.a)({},e),t.data),{},{isAuth:!0});default:return e}},y=s(43),A=Object(r.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var s={id:4,postText:e.newPostText,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{posts:[].concat(Object(c.a)(e.posts),[s]),newPostText:""});case O:return Object(i.a)(Object(i.a)({},e),{},{newPostText:t.inputPostText});case f:return Object(i.a)(Object(i.a)({},e),{},{userProfile:t.userProfile});default:return e}},dialoguesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(i.a)(Object(i.a)({},e),{},{newMessageText:t.inputMessageText});case m:return Object(i.a)(Object(i.a)({},e),{},{newMessageText:"",messages:[].concat(Object(c.a)(e.messages),[{id:6,messageText:e.newMessageText}])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case _:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case T:return Object(i.a)(Object(i.a)({},e),{},{users:Object(c.a)(t.users)});case"SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:I}),U=Object(r.c)(A,Object(r.a)(y.a)),k=s(22),L=s.n(k),M=s(3),G=s(28),R=s.n(G),F=s(5),D=s(7),W=s.n(D),B=s(0),z=function(){return Object(B.jsxs)("nav",{className:W.a.nav,children:[Object(B.jsx)("div",{className:W.a.item,children:Object(B.jsx)(F.b,{to:"/profile",activeClassName:W.a.active,children:"Profile"})}),Object(B.jsx)("div",{className:W.a.item,children:Object(B.jsx)(F.b,{to:"/dialogues",activeClassName:W.a.active,children:"Dialogues"})}),Object(B.jsx)("div",{className:W.a.item,children:Object(B.jsx)(F.b,{to:"/users",activeClassName:W.a.active,children:"Users"})}),Object(B.jsx)("div",{className:W.a.item,children:Object(B.jsx)(F.b,{to:"/news",activeClassName:W.a.active,children:"News"})}),Object(B.jsx)("div",{className:W.a.item,children:Object(B.jsx)(F.b,{to:"/music",activeClassName:W.a.active,children:"Music"})}),Object(B.jsx)("div",{className:W.a.item,children:Object(B.jsx)(F.b,{to:"/settings",activeClassName:W.a.active,children:"Settings"})})]})},H=s(23),J=s.n(H),K=s(45),q=s.n(K),V=function(e){var t="/dialogues/".concat(e.id);return Object(B.jsx)("div",{className:q.a.dialogue,children:Object(B.jsx)(F.b,{to:t,children:e.personName})})},Y=s(46),Q=s.n(Y),X=function(e){return Object(B.jsx)("div",{className:Q.a.message,children:e.messageText})},Z=s(11),$=Object(Z.b)((function(e){return{messages:e.dialoguesPage.messages,dialogues:e.dialoguesPage.dialogues,newMessageText:e.dialoguesPage.newMessageText,isAuth:e.auth.isAuth}}),{updateNewMessageText:function(e){return{type:x,inputMessageText:e}},sendMessage:function(){return{type:m}}})((function(e){var t=e.dialogues.map((function(e){return Object(B.jsx)(V,{personName:e.personName,id:e.id})})),s=e.messages.map((function(e){return Object(B.jsx)(X,{messageText:e.messageText,id:e.id})}));return e.isAuth?Object(B.jsxs)("div",{className:J.a.dialoguesPage,children:[Object(B.jsx)("div",{className:J.a.dialoguesList,children:t}),Object(B.jsxs)("div",{className:J.a.messagesList,children:[Object(B.jsx)("div",{children:s}),Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{children:Object(B.jsx)("textarea",{value:e.newMessageText,onChange:function(t){e.updateNewMessageText(t.currentTarget.value)},placeholder:"Enter your message"})}),Object(B.jsx)("div",{children:Object(B.jsx)("button",{onClick:function(){e.sendMessage()},children:"Send"})})]})]})]}):Object(B.jsx)(M.a,{to:"/login"})})),ee=s(15),te=s(16),se=s(18),ne=s(17),ae=s(24),re=s.n(ae),ce=s.p+"static/media/user.cb9d7bb0.png",ie=a.a.memo((function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],n=1;n<=t;n++)s.push(n);return Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{children:s.map((function(t){return Object(B.jsxs)("span",{className:e.currentPage===t?re.a.selectedPage:re.a.page,onClick:function(s){e.onPageChanged(t)},children:[" ",t," "]})}))}),e.users.map((function(t){return Object(B.jsxs)("div",{children:[Object(B.jsxs)("span",{children:[Object(B.jsx)("div",{children:Object(B.jsx)(F.b,{to:"/profile/".concat(t.id),children:Object(B.jsx)("img",{className:re.a.avatar,src:t.photos.small?t.photos.small:ce})})}),Object(B.jsx)("div",{children:t.followed?Object(B.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(B.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(B.jsxs)("span",{children:[Object(B.jsx)("div",{children:t.name}),Object(B.jsx)("div",{children:t.status})]})]},t.id)}))]})})),oe=s.p+"static/media/loadingBook.b98a8c76.svg",ue=function(){return Object(B.jsx)("div",{children:Object(B.jsx)("img",{src:oe,alt:"Loading"})})},le=function(e){Object(se.a)(s,e);var t=Object(ne.a)(s);function s(){var e;Object(ee.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(te.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(B.jsxs)(B.Fragment,{children:[this.props.isFetching?Object(B.jsx)(ue,{}):null,Object(B.jsx)(ie,{users:this.props.users,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress})]})}}]),s}(a.a.Component),je=Object(Z.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return function(t){t(C(e,!0)),j(e).then((function(s){s.data.resultCode,t(C(e,!1))}))}},unfollow:function(e){return function(t){t(C(e,!0)),d(e).then((function(s){s.data.resultCode,t(C(e,!1))}))}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},getUsers:function(e,t){return function(s){s(N(!0)),l(e,t).then((function(e){var t;s(N(!1)),s((t=e.items,{type:T,users:t})),s({type:"SET_TOTAL_USERS_COUNT",totalUsersCount:e.totalCount})}))}}})(le),de=s(30),pe=s.n(de),ge=function(e){return e.userProfile.userId?Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{children:Object(B.jsx)("img",{className:pe.a.image,src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"background"})}),Object(B.jsx)("div",{className:pe.a.descriptionBlock,children:"Ava + description"})]}):Object(B.jsx)(ue,{})},be=s(31),Oe=s.n(be),fe=s(48),he=s.n(fe),xe=function(e){return Object(B.jsxs)("div",{className:he.a.item,children:[Object(B.jsx)("img",{src:"https://png.pngtree.com/png-clipart/20190920/original/pngtree-happy-fox-avatar-illustration-png-image_4677278.jpg",alt:"person photo"}),e.postText,Object(B.jsx)("div",{children:Object(B.jsx)("span",{children:e.likesCount})})]})},me=Object(Z.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,userProfile:e.profilePage.userProfile}}),{updateNewPostText:function(e){return{type:O,inputPostText:e}},addPost:function(){return{type:b}}})((function(e){var t=e.posts.map((function(e){return Object(B.jsx)(xe,{postText:e.postText,likesCount:e.likesCount,id:e.id})}));return Object(B.jsxs)("div",{className:Oe.a.postsBlock,children:[Object(B.jsx)("h3",{children:"My posts"}),Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{children:Object(B.jsx)("textarea",{value:e.newPostText,onChange:function(t){e.updateNewPostText(t.currentTarget.value)}})}),Object(B.jsx)("div",{children:Object(B.jsx)("button",{onClick:function(){e.addPost()},children:"Add post"})})]}),Object(B.jsx)("div",{className:Oe.a.posts,children:t})]})})),ve=function(e){return Object(B.jsxs)("div",{children:[Object(B.jsx)(ge,{userProfile:e.userProfile}),Object(B.jsx)(me,{})]})},Pe=function(e){Object(se.a)(s,e);var t=Object(ne.a)(s);function s(){var e;Object(ee.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).render=function(){return e.props.isAuth?Object(B.jsx)("div",{children:Object(B.jsx)(ve,Object(i.a)(Object(i.a)({},e.props),{},{userProfile:e.props.userProfile}))}):Object(B.jsx)(M.a,{to:"/login"})},e}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=Number(this.props.match.params.userId);e||(e=2),this.props.getUserProfile(e)}}]),s}(a.a.Component),_e=Object(M.f)(Pe),Te=Object(Z.b)((function(e){return{userProfile:e.profilePage.userProfile,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(t){p(e).then((function(e){var s;t((s=e.data,{type:f,userProfile:s}))}))}}})(_e),we=s(32),Ne=s.n(we),Ce=function(e){return Object(B.jsxs)("header",{className:Ne.a.header,children:[Object(B.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social-sq.png",alt:"Logo"}),Object(B.jsx)("div",{className:Ne.a.loginBlock,children:e.isAuth?e.login:Object(B.jsx)(F.b,{to:"/login",children:"Login"})})]})},Ee=function(e){Object(se.a)(s,e);var t=Object(ne.a)(s);function s(){var e;Object(ee.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(B.jsx)(Ce,Object(i.a)({},e.props))},e}return Object(te.a)(s,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}}]),s}(a.a.Component),Se=Object(Z.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:function(){return function(e){g().then((function(t){0===t.data.resultCode&&e(function(e){return{type:E,data:e}}(t.data.data))}))}}})(Ee),Ie=function(){return Object(B.jsx)("h1",{children:"Login"})};function ye(){return Object(B.jsxs)("div",{className:R.a.appWrapper,children:[Object(B.jsx)(Se,{}),Object(B.jsx)(z,{}),Object(B.jsxs)("div",{className:R.a.appWrapperContent,children:[Object(B.jsx)(M.b,{path:"/profile/:userID?",render:function(){return Object(B.jsx)(Te,{})}}),Object(B.jsx)(M.b,{path:"/dialogues",render:function(){return Object(B.jsx)($,{})}}),Object(B.jsx)(M.b,{path:"/users",render:function(){return Object(B.jsx)(je,{})}}),Object(B.jsx)(M.b,{path:"/login",render:function(){return Object(B.jsx)(Ie,{})}})]})]})}L.a.render(Object(B.jsx)(F.a,{children:Object(B.jsx)(Z.a,{store:U,children:Object(B.jsx)(ye,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.1e2fd19b.chunk.js.map