(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[0],{24:function(e,t,s){e.exports={dialoguesPage:"Dialogues_dialoguesPage__1gZ1M",dialoguesList:"Dialogues_dialoguesList__xmogx",active:"Dialogues_active__jc3c8",messagesList:"Dialogues_messagesList__EVw8R"}},25:function(e,t,s){e.exports={avatar:"users_avatar__2NBm8",selectedPage:"users_selectedPage__2VY4r"}},28:function(e,t,s){e.exports={appWrapper:"App_appWrapper__1N3As",appWrapperContent:"App_appWrapperContent__1Rv3K"}},30:function(e,t,s){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__mkR90"}},31:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__2-bek",posts:"MyPosts_posts__zQK6_"}},32:function(e,t,s){e.exports={header:"Header_header__3vltG",loginBlock:"Header_loginBlock__j78vF"}},44:function(e,t,s){e.exports={dialogue:"DialogueItem_dialogue__28rWi"}},45:function(e,t,s){e.exports={message:"Message_message__3tJw3"}},47:function(e,t,s){e.exports={item:"Post_item__1zOmz"}},49:function(e,t,s){},7:function(e,t,s){e.exports={nav:"Navbar_nav__-FuZV",item:"Navbar_item__2-lI7",active:"Navbar_active__KiUqI"}},78:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),r=(s(49),s(33)),o=s(13),i=s(2),c="ADD-POST",l="UPDATE-NEW-POST-TEXT",u="SET-USER-PROFILE",d={posts:[],newPostText:"",userProfile:{}},g="UPDATE-NEW-MESSAGE-TEXT",j="SEND-MESSAGE",p={dialogues:[{id:1,personName:"1111"},{id:2,personName:"2222"},{id:3,personName:"3333"},{id:4,personName:"4444"},{id:5,personName:"5555"}],messages:[{id:1,messageText:"Hi-Hi-Hi!!!!!!"},{id:2,messageText:"Go to sleep, pls)))))."},{id:3,messageText:"I Love You!!)))"},{id:4,messageText:"Why.....&"},{id:5,messageText:"$500/month is not enough... We can do better!!!!"}],newMessageText:""},b="FOLLOW",h="UNFOLLOW",O="SET-USERS",f={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},x=function(e){return{type:b,userId:e}},m=function(e){return{type:h,userId:e}},v="SET-USER-DATA",P={id:null,email:null,login:null,isAuth:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(i.a)(Object(i.a)(Object(i.a)({},e),t.data),{},{isAuth:!0});default:return e}},w=Object(r.a)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var s={id:4,postText:e.newPostText,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{posts:[].concat(Object(o.a)(e.posts),[s]),newPostText:""});case l:return Object(i.a)(Object(i.a)({},e),{},{newPostText:t.inputPostText});case u:return Object(i.a)(Object(i.a)({},e),{},{userProfile:t.userProfile});default:return e}},dialoguesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(i.a)(Object(i.a)({},e),{},{newMessageText:t.inputMessageText});case j:return Object(i.a)(Object(i.a)({},e),{},{newMessageText:"",messages:[].concat(Object(o.a)(e.messages),[{id:6,messageText:e.newMessageText}])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case h:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case O:return Object(i.a)(Object(i.a)({},e),{},{users:Object(o.a)(t.users)});case"SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:_}),T=Object(r.b)(w),N=s(23),C=s.n(N),I=s(3),E=s(28),S=s.n(E),y=s(5),k=s(7),U=s.n(k),F=s(0),A=function(){return Object(F.jsxs)("nav",{className:U.a.nav,children:[Object(F.jsx)("div",{className:U.a.item,children:Object(F.jsx)(y.b,{to:"/profile",activeClassName:U.a.active,children:"Profile"})}),Object(F.jsx)("div",{className:U.a.item,children:Object(F.jsx)(y.b,{to:"/dialogues",activeClassName:U.a.active,children:"Dialogues"})}),Object(F.jsx)("div",{className:U.a.item,children:Object(F.jsx)(y.b,{to:"/users",activeClassName:U.a.active,children:"Users"})}),Object(F.jsx)("div",{className:U.a.item,children:Object(F.jsx)(y.b,{to:"/news",activeClassName:U.a.active,children:"News"})}),Object(F.jsx)("div",{className:U.a.item,children:Object(F.jsx)(y.b,{to:"/music",activeClassName:U.a.active,children:"Music"})}),Object(F.jsx)("div",{className:U.a.item,children:Object(F.jsx)(y.b,{to:"/settings",activeClassName:U.a.active,children:"Settings"})})]})},L=s(24),M=s.n(L),G=s(44),R=s.n(G),D=function(e){var t="/dialogues/".concat(e.id);return Object(F.jsx)("div",{className:R.a.dialogue,children:Object(F.jsx)(y.b,{to:t,children:e.personName})})},W=s(45),B=s.n(W),z=function(e){return Object(F.jsx)("div",{className:B.a.message,children:e.messageText})},H=s(11),K=Object(H.b)((function(e){return{messages:e.dialoguesPage.messages,dialogues:e.dialoguesPage.dialogues,newMessageText:e.dialoguesPage.newMessageText}}),{updateNewMessageText:function(e){return{type:g,inputMessageText:e}},sendMessage:function(){return{type:j}}})((function(e){var t=e.dialogues.map((function(e){return Object(F.jsx)(D,{personName:e.personName,id:e.id})})),s=e.messages.map((function(e){return Object(F.jsx)(z,{messageText:e.messageText,id:e.id})}));return Object(F.jsxs)("div",{className:M.a.dialoguesPage,children:[Object(F.jsx)("div",{className:M.a.dialoguesList,children:t}),Object(F.jsxs)("div",{className:M.a.messagesList,children:[Object(F.jsx)("div",{children:s}),Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)("textarea",{value:e.newMessageText,onChange:function(t){e.updateNewMessageText(t.currentTarget.value)},placeholder:"Enter your message"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{onClick:function(){e.sendMessage()},children:"Send"})})]})]})]})})),J=s(16),Y=s(17),q=s(19),V=s(18),Q=s(25),X=s.n(Q),Z=s.p+"static/media/user.cb9d7bb0.png",$=s(12),ee=s.n($),te=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],n=1;n<=t;n++)s.push(n);return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:s.map((function(t){return Object(F.jsxs)("span",{className:e.currentPage===t?X.a.selectedPage:X.a.page,onClick:function(s){e.onPageChanged(t)},children:[" ",t," "]})}))}),e.users.map((function(t){return Object(F.jsxs)("div",{children:[Object(F.jsxs)("span",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(y.b,{to:"/profile/".concat(t.id),children:Object(F.jsx)("img",{className:X.a.avatar,src:t.photos.small?t.photos.small:Z})})}),Object(F.jsx)("div",{children:t.followed?Object(F.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(t.id,!0),ee.a.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{withCredentials:!0,headers:{"API-KEY":"c8be0b36-3ac5-42a7-89ea-e79ef5d95007"}}).then((function(s){0===s.data.resultCode&&e.unfollow(t.id),e.toggleFollowingProgress(t.id,!1)}))},children:"Unfollow"}):Object(F.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(t.id,!0),ee.a.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{},{withCredentials:!0,headers:{"API-KEY":"c8be0b36-3ac5-42a7-89ea-e79ef5d95007"}}).then((function(s){0===s.data.resultCode&&e.follow(t.id),e.toggleFollowingProgress(t.id,!1)}))},children:"Follow"})})]}),Object(F.jsxs)("span",{children:[Object(F.jsx)("div",{children:t.name}),Object(F.jsx)("div",{children:t.status})]})]},t.id)}))]})},se=s.p+"static/media/loadingBook.b98a8c76.svg",ne=function(){return Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:se,alt:"Loading"})})},ae=ee.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"c8be0b36-3ac5-42a7-89ea-e79ef5d95007"}}),re=function(e,t){return ae.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},oe=function(e){Object(q.a)(s,e);var t=Object(V.a)(s);function s(){var e;Object(J.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0),re(t,e.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items)}))},e}return Object(Y.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),re(this.props.currentPage,this.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))}},{key:"render",value:function(){return Object(F.jsxs)(F.Fragment,{children:[this.props.isFetching?Object(F.jsx)(ne,{}):null,Object(F.jsx)(te,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,toggleFollowingProgress:this.props.toggleFollowingProgress,followingInProgress:this.props.followingInProgress})]})}}]),s}(a.a.Component),ie=Object(H.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:x,unfollow:m,setUsers:function(e){return{type:O,users:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:function(e){return{type:"SET_TOTAL_USERS_COUNT",totalUsersCount:e}},toggleIsFetching:function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},toggleFollowingProgress:function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",userId:e,followingInProgress:t}}})(oe),ce=s(30),le=s.n(ce),ue=function(e){return e.userProfile.userId?Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{className:le.a.image,src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"background"})}),Object(F.jsx)("div",{className:le.a.descriptionBlock,children:"Ava + description"})]}):Object(F.jsx)(ne,{})},de=s(31),ge=s.n(de),je=s(47),pe=s.n(je),be=function(e){return Object(F.jsxs)("div",{className:pe.a.item,children:[Object(F.jsx)("img",{src:"https://png.pngtree.com/png-clipart/20190920/original/pngtree-happy-fox-avatar-illustration-png-image_4677278.jpg",alt:"person photo"}),e.postText,Object(F.jsx)("div",{children:Object(F.jsx)("span",{children:e.likesCount})})]})},he=Object(H.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,userProfile:e.profilePage.userProfile}}),{updateNewPostText:function(e){return{type:l,inputPostText:e}},addPost:function(){return{type:c}}})((function(e){var t=e.posts.map((function(e){return Object(F.jsx)(be,{postText:e.postText,likesCount:e.likesCount,id:e.id})}));return Object(F.jsxs)("div",{className:ge.a.postsBlock,children:[Object(F.jsx)("h3",{children:"My posts"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)("textarea",{value:e.newPostText,onChange:function(t){e.updateNewPostText(t.currentTarget.value)}})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{onClick:function(){e.addPost()},children:"Add post"})})]}),Object(F.jsx)("div",{className:ge.a.posts,children:t})]})})),Oe=function(e){return Object(F.jsxs)("div",{children:[Object(F.jsx)(ue,{userProfile:e.userProfile}),Object(F.jsx)(he,{})]})},fe=function(e){Object(q.a)(s,e);var t=Object(V.a)(s);function s(){var e;Object(J.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(F.jsx)("div",{children:Object(F.jsx)(Oe,Object(i.a)(Object(i.a)({},e.props),{},{userProfile:e.props.userProfile}))})},e}return Object(Y.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userID;t||(t="2"),ee.a.get("https://social-network.samuraijs.com/api/1.0/profile/".concat(t)).then((function(t){e.props.setUserProfile(t.data)}))}}]),s}(a.a.Component),xe=Object(I.e)(fe),me=Object(H.b)((function(e){return{userProfile:e.profilePage.userProfile}}),{setUserProfile:function(e){return{type:u,userProfile:e}}})(xe),ve=s(32),Pe=s.n(ve),_e=function(e){return Object(F.jsxs)("header",{className:Pe.a.header,children:[Object(F.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social-sq.png",alt:"Logo"}),Object(F.jsx)("div",{className:Pe.a.loginBlock,children:e.isAuth?e.login:Object(F.jsx)(y.b,{to:"/login",children:"Login"})})]})},we=function(e){Object(q.a)(s,e);var t=Object(V.a)(s);function s(){var e;Object(J.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(F.jsx)(_e,Object(i.a)({},e.props))},e}return Object(Y.a)(s,[{key:"componentDidMount",value:function(){var e=this;ee.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(t){0===t.data.resultCode&&e.props.setAuthUserData(t.data.data)}))}}]),s}(a.a.Component),Te=Object(H.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e){return{type:v,data:e}}})(we);function Ne(){return Object(F.jsxs)("div",{className:S.a.appWrapper,children:[Object(F.jsx)(Te,{}),Object(F.jsx)(A,{}),Object(F.jsxs)("div",{className:S.a.appWrapperContent,children:[Object(F.jsx)(I.a,{path:"/profile/:userID?",render:function(){return Object(F.jsx)(me,{})}}),Object(F.jsx)(I.a,{path:"/dialogues",render:function(){return Object(F.jsx)(K,{})}}),Object(F.jsx)(I.a,{path:"/users",render:function(){return Object(F.jsx)(ie,{})}})]})]})}C.a.render(Object(F.jsx)(y.a,{children:Object(F.jsx)(H.a,{store:T,children:Object(F.jsx)(Ne,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.347d6e59.chunk.js.map