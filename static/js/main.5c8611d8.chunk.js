(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[0],{24:function(e,t,s){e.exports={dialoguesPage:"Dialogues_dialoguesPage__1gZ1M",dialoguesList:"Dialogues_dialoguesList__xmogx",active:"Dialogues_active__jc3c8",messagesList:"Dialogues_messagesList__EVw8R"}},25:function(e,t,s){e.exports={avatar:"users_avatar__2NBm8",selectedPage:"users_selectedPage__2VY4r"}},28:function(e,t,s){e.exports={appWrapper:"App_appWrapper__1N3As",appWrapperContent:"App_appWrapperContent__1Rv3K"}},30:function(e,t,s){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__mkR90"}},31:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__2-bek",posts:"MyPosts_posts__zQK6_"}},32:function(e,t,s){e.exports={header:"Header_header__3vltG",loginBlock:"Header_loginBlock__j78vF"}},44:function(e,t,s){e.exports={dialogue:"DialogueItem_dialogue__28rWi"}},45:function(e,t,s){e.exports={message:"Message_message__3tJw3"}},47:function(e,t,s){e.exports={item:"Post_item__1zOmz"}},49:function(e,t,s){},7:function(e,t,s){e.exports={nav:"Navbar_nav__-FuZV",item:"Navbar_item__2-lI7",active:"Navbar_active__KiUqI"}},78:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=(s(49),s(33)),c=s(17),i=s(2),o="ADD-POST",u="UPDATE-NEW-POST-TEXT",l="SET-USER-PROFILE",d={posts:[],newPostText:"",userProfile:{}},j="UPDATE-NEW-MESSAGE-TEXT",p="SEND-MESSAGE",g={dialogues:[{id:1,personName:"1111"},{id:2,personName:"2222"},{id:3,personName:"3333"},{id:4,personName:"4444"},{id:5,personName:"5555"}],messages:[{id:1,messageText:"Hi-Hi-Hi!!!!!!"},{id:2,messageText:"Go to sleep, pls)))))."},{id:3,messageText:"I Love You!!)))"},{id:4,messageText:"Why.....&"},{id:5,messageText:"$500/month is not enough... We can do better!!!!"}],newMessageText:""},b="FOLLOW",h="UNFOLLOW",O="SET-USERS",f={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!0},x="SET-USER-DATA",m={id:null,email:null,login:null,isAuth:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(i.a)(Object(i.a)(Object(i.a)({},e),t.data),{},{isAuth:!0});default:return e}},P=Object(r.a)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var s={id:4,postText:e.newPostText,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{posts:[].concat(Object(c.a)(e.posts),[s]),newPostText:""});case u:return Object(i.a)(Object(i.a)({},e),{},{newPostText:t.inputPostText});case l:return Object(i.a)(Object(i.a)({},e),{},{userProfile:t.userProfile});default:return e}},dialoguesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(i.a)(Object(i.a)({},e),{},{newMessageText:t.inputMessageText});case p:return Object(i.a)(Object(i.a)({},e),{},{newMessageText:"",messages:[].concat(Object(c.a)(e.messages),[{id:6,messageText:e.newMessageText}])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case h:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case O:return Object(i.a)(Object(i.a)({},e),{},{users:Object(c.a)(t.users)});case"SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});default:return e}},auth:v}),_=Object(r.b)(P),T=s(23),w=s.n(T),N=s(3),C=s(28),E=s.n(C),k=s(5),y=s(7),S=s.n(y),U=s(0),A=function(){return Object(U.jsxs)("nav",{className:S.a.nav,children:[Object(U.jsx)("div",{className:S.a.item,children:Object(U.jsx)(k.b,{to:"/profile",activeClassName:S.a.active,children:"Profile"})}),Object(U.jsx)("div",{className:S.a.item,children:Object(U.jsx)(k.b,{to:"/dialogues",activeClassName:S.a.active,children:"Dialogues"})}),Object(U.jsx)("div",{className:S.a.item,children:Object(U.jsx)(k.b,{to:"/users",activeClassName:S.a.active,children:"Users"})}),Object(U.jsx)("div",{className:S.a.item,children:Object(U.jsx)(k.b,{to:"/news",activeClassName:S.a.active,children:"News"})}),Object(U.jsx)("div",{className:S.a.item,children:Object(U.jsx)(k.b,{to:"/music",activeClassName:S.a.active,children:"Music"})}),Object(U.jsx)("div",{className:S.a.item,children:Object(U.jsx)(k.b,{to:"/settings",activeClassName:S.a.active,children:"Settings"})})]})},M=s(24),I=s.n(M),F=s(44),D=s.n(F),L=function(e){var t="/dialogues/".concat(e.id);return Object(U.jsx)("div",{className:D.a.dialogue,children:Object(U.jsx)(k.b,{to:t,children:e.personName})})},R=s(45),W=s.n(R),B=function(e){return Object(U.jsx)("div",{className:W.a.message,children:e.messageText})},G=s(11),z=Object(G.b)((function(e){return{messages:e.dialoguesPage.messages,dialogues:e.dialoguesPage.dialogues,newMessageText:e.dialoguesPage.newMessageText}}),{updateNewMessageText:function(e){return{type:j,inputMessageText:e}},sendMessage:function(){return{type:p}}})((function(e){var t=e.dialogues.map((function(e){return Object(U.jsx)(L,{personName:e.personName,id:e.id})})),s=e.messages.map((function(e){return Object(U.jsx)(B,{messageText:e.messageText,id:e.id})}));return Object(U.jsxs)("div",{className:I.a.dialoguesPage,children:[Object(U.jsx)("div",{className:I.a.dialoguesList,children:t}),Object(U.jsxs)("div",{className:I.a.messagesList,children:[Object(U.jsx)("div",{children:s}),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)("textarea",{value:e.newMessageText,onChange:function(t){e.updateNewMessageText(t.currentTarget.value)},placeholder:"Enter your message"})}),Object(U.jsx)("div",{children:Object(U.jsx)("button",{onClick:function(){e.sendMessage()},children:"Send"})})]})]})]})})),H=s(15),K=s(16),J=s(19),Y=s(18),q=s(12),V=s.n(q),Q=s(25),X=s.n(Q),Z=s.p+"static/media/user.cb9d7bb0.png",$=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],a=1;a<=t;a++)s.push(a);return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:s.map((function(t){return Object(U.jsxs)("span",{className:e.currentPage===t?X.a.selectedPage:X.a.page,onClick:function(s){e.onPageChanged(t)},children:[" ",t," "]})}))}),e.users.map((function(t){return Object(U.jsxs)("div",{children:[Object(U.jsxs)("span",{children:[Object(U.jsx)("div",{children:Object(U.jsx)(k.b,{to:"/profile/".concat(t.id),children:Object(U.jsx)("img",{className:X.a.avatar,src:t.photos.small?t.photos.small:Z})})}),Object(U.jsx)("div",{children:t.followed?Object(U.jsx)("button",{onClick:function(){V.a.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{withCredentials:!0,headers:{"API-KEY":"624556bc-2429-44b0-abcc-055e502b56fb"}}).then((function(s){0===s.data.resultCode&&e.unfollow(t.id)}))},children:"Unfollow"}):Object(U.jsx)("button",{onClick:function(){V.a.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{},{withCredentials:!0,headers:{"API-KEY":"624556bc-2429-44b0-abcc-055e502b56fb"}}).then((function(s){0===s.data.resultCode&&e.follow(t.id)}))},children:"Follow"})})]}),Object(U.jsxs)("span",{children:[Object(U.jsx)("div",{children:t.name}),Object(U.jsx)("div",{children:t.status})]})]},t.id)}))]})},ee=s.p+"static/media/loadingBook.b98a8c76.svg",te=function(){return Object(U.jsx)("div",{children:Object(U.jsx)("img",{src:ee,alt:"Loading"})})},se=function(e){Object(J.a)(s,e);var t=Object(Y.a)(s);function s(){var e;Object(H.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0),V.a.get("https://social-network.samuraijs.com/api/1.0/users?page=".concat(t,"&count=").concat(e.props.pageSize),{withCredentials:!0}).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.data.items)}))},e}return Object(K.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),V.a.get("https://social-network.samuraijs.com/api/1.0/users?page=".concat(this.props.currentPage,"&count=").concat(this.props.pageSize),{withCredentials:!0}).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.data.items),e.props.setTotalUsersCount(t.data.totalCount)}))}},{key:"render",value:function(){return Object(U.jsxs)(U.Fragment,{children:[this.props.isFetching?Object(U.jsx)(te,{}):null,Object(U.jsx)($,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow})]})}}]),s}(n.a.Component),ae=Object(G.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching}}),{follow:function(e){return{type:b,userId:e}},unfollow:function(e){return{type:h,userId:e}},setUsers:function(e){return{type:O,users:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:function(e){return{type:"SET_TOTAL_USERS_COUNT",totalUsersCount:e}},toggleIsFetching:function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}}})(se),ne=s(30),re=s.n(ne),ce=function(e){return e.userProfile.userId?Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)("img",{className:re.a.image,src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"background"})}),Object(U.jsx)("div",{className:re.a.descriptionBlock,children:"Ava + description"})]}):Object(U.jsx)(te,{})},ie=s(31),oe=s.n(ie),ue=s(47),le=s.n(ue),de=function(e){return Object(U.jsxs)("div",{className:le.a.item,children:[Object(U.jsx)("img",{src:"https://png.pngtree.com/png-clipart/20190920/original/pngtree-happy-fox-avatar-illustration-png-image_4677278.jpg",alt:"person photo"}),e.postText,Object(U.jsx)("div",{children:Object(U.jsx)("span",{children:e.likesCount})})]})},je=Object(G.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,userProfile:e.profilePage.userProfile}}),{updateNewPostText:function(e){return{type:u,inputPostText:e}},addPost:function(){return{type:o}}})((function(e){var t=e.posts.map((function(e){return Object(U.jsx)(de,{postText:e.postText,likesCount:e.likesCount,id:e.id})}));return Object(U.jsxs)("div",{className:oe.a.postsBlock,children:[Object(U.jsx)("h3",{children:"My posts"}),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)("textarea",{value:e.newPostText,onChange:function(t){e.updateNewPostText(t.currentTarget.value)}})}),Object(U.jsx)("div",{children:Object(U.jsx)("button",{onClick:function(){e.addPost()},children:"Add post"})})]}),Object(U.jsx)("div",{className:oe.a.posts,children:t})]})})),pe=function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(ce,{userProfile:e.userProfile}),Object(U.jsx)(je,{})]})},ge=function(e){Object(J.a)(s,e);var t=Object(Y.a)(s);function s(){var e;Object(H.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).render=function(){return Object(U.jsx)("div",{children:Object(U.jsx)(pe,Object(i.a)(Object(i.a)({},e.props),{},{userProfile:e.props.userProfile}))})},e}return Object(K.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userID;t||(t="2"),V.a.get("https://social-network.samuraijs.com/api/1.0/profile/".concat(t)).then((function(t){e.props.setUserProfile(t.data)}))}}]),s}(n.a.Component),be=Object(N.e)(ge),he=Object(G.b)((function(e){return{userProfile:e.profilePage.userProfile}}),{setUserProfile:function(e){return{type:l,userProfile:e}}})(be),Oe=s(32),fe=s.n(Oe),xe=function(e){return Object(U.jsxs)("header",{className:fe.a.header,children:[Object(U.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social-sq.png",alt:"Logo"}),Object(U.jsx)("div",{className:fe.a.loginBlock,children:e.isAuth?e.login:Object(U.jsx)(k.b,{to:"/login",children:"Login"})})]})},me=function(e){Object(J.a)(s,e);var t=Object(Y.a)(s);function s(){var e;Object(H.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).render=function(){return Object(U.jsx)(xe,Object(i.a)({},e.props))},e}return Object(K.a)(s,[{key:"componentDidMount",value:function(){var e=this;V.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(t){0===t.data.resultCode&&e.props.setAuthUserData(t.data.data)}))}}]),s}(n.a.Component),ve=Object(G.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e){return{type:x,data:e}}})(me);function Pe(){return Object(U.jsxs)("div",{className:E.a.appWrapper,children:[Object(U.jsx)(ve,{}),Object(U.jsx)(A,{}),Object(U.jsxs)("div",{className:E.a.appWrapperContent,children:[Object(U.jsx)(N.a,{path:"/profile/:userID?",render:function(){return Object(U.jsx)(he,{})}}),Object(U.jsx)(N.a,{path:"/dialogues",render:function(){return Object(U.jsx)(z,{})}}),Object(U.jsx)(N.a,{path:"/users",render:function(){return Object(U.jsx)(ae,{})}})]})]})}w.a.render(Object(U.jsx)(k.a,{children:Object(U.jsx)(G.a,{store:_,children:Object(U.jsx)(Pe,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.5c8611d8.chunk.js.map