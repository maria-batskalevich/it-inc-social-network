"use strict";(self.webpackChunkway_of_samurai=self.webpackChunkway_of_samurai||[]).push([[447],{3447:function(t,e,r){r.r(e),r.d(e,{default:function(){return J}});var o=r(5671),s=r(3144),n=r(136),i=r(5716),u=r(2791),a={descriptionBlock:"ProfileInfo_descriptionBlock__y+ySX"},l=r(9263),c="ProfilePhoto_userPhoto__TdSLi",f="ProfilePhoto_setUserPhoto__H5IY9",p=r(393),d=r(184),h=u.memo((function(t){var e=t.isProfileOwner,r=t.profilePhoto,o=t.updateProfilePhoto;return(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{className:c,src:r||p,alt:"User"}),e&&(0,d.jsx)("input",{type:"file",onChange:function(t){t.target.files&&t.target.files.length&&o(t.target.files[0])},className:f})]})}));function m(t){return null}var P=u.memo((function(t){var e=t.userProfile,r=t.updateProfileStatus,o=t.status,s=t.isProfileOwner,n=t.updateProfilePhoto;return e.userId?(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:(0,d.jsx)("img",{className:a.image,src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"background"})}),(0,d.jsx)("div",{className:a.descriptionBlock,children:(0,d.jsx)(h,{updateProfilePhoto:n,isProfileOwner:s,profilePhoto:e.photos.large})}),(0,d.jsx)("img",{alt:"users photo",src:e.photos.large}),(0,d.jsx)(m,{status:o,updateProfileStatus:r})]}):(0,d.jsx)(l.p,{})})),x=r(6407),j="MyPosts_postsBlock__xR9zf",v="MyPosts_posts__38d7t",_=r(6139),g=r(704),Z=r(6854),w=r(5298),b="AddPostForm_btn__wmCjM",k=u.memo((function(t){var e=t.handleSubmit;return(0,d.jsxs)("form",{onSubmit:e,children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z,{component:Z.g,placeholder:"Post text",name:"newPostText",validate:[w.lp,w.Bw]})}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:b,children:"Add post"})})]})})),y=(0,g.Z)({form:"profileAddPostForm"})(k),C="Post_item__Ju2Yi",S="Post_btn__CqRHX",U=u.memo((function(t){var e=t.deletePost,r=t.postText,o=t.likesCount,s=t.id;return(0,d.jsxs)("div",{className:C,children:[(0,d.jsx)("img",{src:"https://png.pngtree.com/png-clipart/20190920/original/pngtree-happy-fox-avatar-illustration-png-image_4677278.jpg",alt:"person photo"}),r,(0,d.jsx)("div",{children:(0,d.jsx)("span",{children:o})}),(0,d.jsx)("button",{onClick:function(){return e(s)},className:S,children:"Delete post"})]})})),I=u.memo((function(t){var e=t.posts,r=t.addPost,o=t.deletePost,s=e.map((function(t){return(0,d.jsx)(U,{postText:t.postText,likesCount:t.likesCount,id:t.id,deletePost:o},t.id)}));return(0,d.jsxs)("div",{className:j,children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsx)("div",{children:(0,d.jsx)(y,{onSubmit:function(t){r(t.newPostText)}})}),(0,d.jsx)("div",{className:v,children:s})]})})),A=r(364),N=function(t){return t.profilePage.posts},R=(0,A.$j)((function(t){return{posts:N(t)}}),{addPost:x.q2,deletePost:x.fR})(I),B=u.memo((function(t){var e=t.userProfile,r=t.updateProfileStatus,o=t.status,s=t.isProfileOwner,n=t.updateProfilePhoto;return(0,d.jsxs)("div",{children:[(0,d.jsx)(P,{userProfile:e,status:o,updateProfileStatus:r,isProfileOwner:s,updateProfilePhoto:n}),(0,d.jsx)(R,{})]})})),F=r(9271),M=r(7781),O=r(2932),T=r(2347),q=function(t){(0,n.Z)(r,t);var e=(0,i.Z)(r);function r(){var t;(0,o.Z)(this,r);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).render=function(){return(0,d.jsx)(B,{isProfileOwner:!t.props.match.params.userId,userProfile:t.props.userProfile,status:t.props.status,updateProfileStatus:t.props.updateProfileStatus,updateProfilePhoto:t.props.updateProfilePhoto})},t}return(0,s.Z)(r,[{key:"updateUserProfile",value:function(){var t=this.props.match.params.userId;!t&&this.props.authUserId?t=this.props.authUserId:t||this.props.authUserId||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getProfileStatus(t)}},{key:"componentDidMount",value:function(){this.updateUserProfile()}},{key:"componentDidUpdate",value:function(t){this.props.match.params.userId!==t.match.params.userId&&this.updateUserProfile()}}]),r}(u.PureComponent),J=(0,M.qC)((0,A.$j)((function(t){return{userProfile:t.profilePage.userProfile,status:t.profilePage.status,authUserId:(0,T.nR)(t),isAuth:(0,T.Jt)(t)}}),{getUserProfile:x.et,getProfileStatus:x.TL,updateProfileStatus:x.vq,updateProfilePhoto:x.Hh}),F.EN,O.D)(q)},6854:function(t,e,r){r.d(e,{g:function(){return f},I:function(){return p}});var o=r(8683),s=r(5987),n=r(2791),i=r(9058),u=r(184),a=["children","input","meta"],l=["children","input","meta"],c=n.memo((function(t){var e=t.meta,r=t.children,o=e.touched&&e.error;return(0,u.jsxs)("div",{className:i.Z.formControl+" "+(o?i.Z.error:""),children:[(0,u.jsx)("div",{children:r}),(0,u.jsx)("div",{children:o&&(0,u.jsx)("span",{children:e.error})})]})})),f=n.memo((function(t){t.children;var e=t.input,r=(t.meta,(0,s.Z)(t,a));return(0,u.jsx)(c,(0,o.Z)((0,o.Z)({},t),{},{children:(0,u.jsx)("textarea",(0,o.Z)((0,o.Z)({},e),r))}))})),p=n.memo((function(t){t.children;var e=t.input,r=(t.meta,(0,s.Z)(t,l));return(0,u.jsx)(c,(0,o.Z)((0,o.Z)({},t),{},{children:(0,u.jsx)("input",(0,o.Z)((0,o.Z)({},e),r))}))}))},2932:function(t,e,r){r.d(e,{D:function(){return c}});var o=r(8683),s=r(5987),n=r(9271),i=r(364),u=r(184),a=["isAuth"],l=function(t){return{isAuth:t.auth.isAuth}};function c(t){return(0,i.$j)(l)((function(e){var r=e.isAuth,i=(0,s.Z)(e,a);return r?(0,u.jsx)(t,(0,o.Z)({},i)):(0,u.jsx)(n.l_,{to:"/login"})}))}},2347:function(t,e,r){r.d(e,{nR:function(){return o},Jt:function(){return s},sS:function(){return n}});var o=function(t){return t.auth.id},s=function(t){return t.auth.isAuth},n=function(t){return t.auth.captchaURL}},5298:function(t,e,r){r.d(e,{lp:function(){return s},Bw:function(){return n}});var o,s=function(t){return t?null:"Field is required"},n=(o=20,function(t){return t.length<o?null:"Max length is ".concat(o," symbols")})},9058:function(t,e){e.Z={formControl:"FormControls_formControl__YxJOw",error:"FormControls_error__ukpSl",formLevelError:"FormControls_formLevelError__pBrdE"}},393:function(t,e,r){t.exports=r.p+"static/media/userAvatar.cb9d7bb0874b70e05e60.png"}}]);
//# sourceMappingURL=447.fa2cab81.chunk.js.map